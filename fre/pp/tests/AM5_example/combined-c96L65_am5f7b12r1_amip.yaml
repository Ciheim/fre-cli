name: c96L65_am5f7b12r1_amip
platform: gfdl.ncrc5-intel22-classic
target: prod-openmp
compile:
  experiment: am5
  container_addlibs: null
  baremetal_linkerflags: null
  src:
  - component: FMS
    repo: https://github.com/NOAA-GFDL/FMS.git
    cppdefs: -DHAVE_GETTID -Duse_libMPI -Duse_netCDF
    branch: '2022.01'
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include
  - component: am5_phys
    requires:
    - FMS
    repo: https://gitlab.gfdl.noaa.gov/FMS/am5_phys.git
    branch: '2022.01'
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include
  - component: GFDL_atmos_cubed_sphere
    requires:
    - FMS
    - am5_phys
    repo: https://github.com/NOAA-GFDL/GFDL_atmos_cubed_sphere.git
    cppdefs: -DSPMD -DCLIMATE_NUDGE -DINTERNAL_FILE_NML
    branch: '2022.01'
    paths:
    - GFDL_atmos_cubed_sphere/driver/GFDL
    - GFDL_atmos_cubed_sphere/model
    - GFDL_atmos_cubed_sphere/driver/SHiELD/cloud_diagnosis.F90
    - GFDL_atmos_cubed_sphere/driver/SHiELD/gfdl_cloud_microphys.F90
    - GFDL_atmos_cubed_sphere/tools
    - GFDL_atmos_cubed_sphere/GFDL_tools
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include
  - component: atmos_drivers
    requires:
    - FMS
    - am5_phys
    - GFDL_atmos_cubed_sphere
    repo: https://github.com/NOAA-GFDL/atmos_drivers.git
    cppdefs: -DSPMD -DCLIMATE_NUDGE
    branch: '2022.01'
    paths:
    - atmos_drivers/coupled
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include
  - component: ice_sis
    requires:
    - FMS
    - ice_param
    - mom6
    repo: https://gitlab.gfdl.noaa.gov/FMS/ice_sis.git
    branch: '2021.02'
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include -Imom6/MOM6-examples/src/MOM6/pkg/CVMix-src/include
  - component: ice_param
    repo: https://github.com/NOAA-GFDL/ice_param.git
    cppdefs: -Duse_yaml -Duse_libMPI -Duse_netCDF
    branch: '2021.02'
    requires:
    - FMS
    - mom6
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include -Imom6/MOM6-examples/src/MOM6/pkg/CVMix-src/include
  - component: land_lad2
    requires:
    - FMS
    repo: https://gitlab.gfdl.noaa.gov/FMS/land_lad2.git
    branch: land_lad2_2021.02
    doF90Cpp: true
    cppdefs: -DINTERNAL_FILE_NML
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include
  - component: mom6
    requires:
    - FMS
    paths:
    - mom6/MOM6-examples/src/MOM6/config_src/dynamic
    - mom6/MOM6-examples/src/MOM6/config_src/coupled_driver
    - mom6/MOM6-examples/src/MOM6/src/*/
    - mom6/MOM6-examples/src/MOM6/src/*/*/
    - mom6/ocean_BGC/generic_tracers
    - mom6/ocean_BGC/mocsy/src
    branch:
    - '2021.02'
    - dev/gfdl/2018.04.06
    repo:
    - https://github.com/NOAA-GFDL/ocean_BGC.git
    - https://github.com/NOAA-GFDL/MOM6-examples.git
    makeOverrides: OPENMP=""
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include -Imom6/MOM6-examples/src/MOM6/pkg/CVMix-src/include
  - component: FMScoupler
    paths:
    - FMScoupler/full
    - FMScoupler/shared
    repo: https://github.com/NOAA-GFDL/FMScoupler.git
    branch: '2022.01'
    requires:
    - FMS
    - atmos_drivers
    - am5_phys
    - land_lad2
    - ice_sis
    - ice_param
    - mom6
    otherFlags: -IFMS/fms2_io/include -IFMS/include -IFMS/mpp/include -Imom6/MOM6-examples/src/MOM6/pkg/CVMix-src/include
platforms:
- name: ncrc5.intel
  compiler: intel
  modulesInit:
  - " module use -a /ncrc/home2/fms/local/modulefiles \n"
  - "source $MODULESHOME/init/sh \n"
  modules:
  - intel-classic/2022.2.1
  - fre/bronx-20
  - cray-hdf5/1.12.2.3
  - cray-netcdf/4.9.0.3
  fc: ftn
  cc: cc
  mkTemplate: /ncrc/home2/fms/local/opt/fre-commands/bronx-20/site/ncrc5/$(INTEL).mk
  modelRoot: ${HOME}/fremake_canopy/test
- name: ncrc5.intel23
  compiler: intel
  modulesInit:
  - " module use -a /ncrc/home2/fms/local/modulefiles \n"
  - "source $MODULESHOME/init/sh \n"
  modules:
  - intel-classic/2023.1.0
  - fre/bronx-20
  - cray-hdf5/1.12.2.3
  - cray-netcdf/4.9.0.3
  fc: ftn
  cc: cc
  mkTemplate: /ncrc/home2/fms/local/opt/fre-commands/bronx-20/site/ncrc5/$(INTEL).mk
  modelRoot: /ncrc/home1/Dana.Singh/fre/fre-cli/fre/make/tests/AM5_example/combine_yamls/test
- name: hpcme.2023
  compiler: intel
  RUNenv:
  - . /spack/share/spack/setup-env.sh
  - spack load libyaml
  - spack load netcdf-fortran@4.5.4
  - spack load hdf5@1.14.0
  modelRoot: /apps
  fc: mpiifort
  cc: mpiicc
  container: true
  containerBuild: podman
  containerRun: apptainer
directories:
  history_dir: /archive/$USER/am5/am5f7b12r1/c96L65_am5f7b12r1_amip/gfdl.ncrc5-intel22-classic-prod-openmp/history
  pp_dir: /archive/$USER/am5/am5f7b12r1/c96L65_am5f7b12r1_amip/gfdl.ncrc5-intel22-classic-prod-openmp/pp
  analysis_dir: /nbhome/$USER/am5/am5f7b12r1/c96L65_am5f7b12r1_amip
  ptmp_dir: /ptmp/$USER
  fre_analysis_home: /home/fms/local/opt/fre-analysis/test
  pp_grid_spec: /archive/oar.gfdl.am5/model_gen5/inputs/c96_grid/c96_OM4_025_grid_No_mg_drag_v20160808.tar
postprocess:
  settings:
    history_segment: P1Y
    site: ppan
    pp_start: 19800101T0000Z
    pp_stop: 20200101T0000Z
    pp_chunk_a: P1Y
    pp_components: atmos atmos_scalar
  switches:
    do_statics: false
    do_timeavgs: true
    clean_work: true
    do_refinediag: false
    do_atmos_plevel_masking: true
    do_preanalysis: false
    do_analysis: true
  components:
  - type: atmos_cmip
    sources: atmos_month_cmip atmos_8xdaily_cmip atmos_daily_cmip
    sourceGrid: cubedsphere
    xyInterp: 180,360
    interpMethod: conserve_order2
    inputRealm: atmos
  - type: atmos
    sources: atmos_month
    sourceGrid: cubedsphere
    xyInterp: 180,288
    interpMethod: conserve_order2
    inputRealm: atmos
  - type: atmos_level_cmip
    sources: atmos_level_cmip
    sourceGrid: cubedsphere
    xyInterp: 180,288
    interpMethod: conserve_order2
    inputRealm: atmos
  - type: atmos_level
    sources: atmos_month
    sourceGrid: cubedsphere
    xyInterp: 180,288
    interpMethod: conserve_order2
    inputRealm: atmos
  - type: atmos_month_aer
    sources: atmos_month_aer
    sourceGrid: cubedsphere
    xyInterp: 180,288
    interpMethod: conserve_order1
    inputRealm: atmos
  - type: atmos_diurnal
    sources: atmos_diurnal
    sourceGrid: cubedsphere
    xyInterp: 180,288
    interpMethod: conserve_order2
    inputRealm: atmos
  - type: atmos_scalar
    sources: atmos_scalar
  - type: aerosol_cmip
    xyInterp: 180,288
    sources: aerosol_month_cmip
    sourceGrid: cubedsphere
    interpMethod: conserve_order1
    inputRealm: atmos
  - type: land
    sources: land_month
    sourceGrid: cubedsphere
    xyInterp: 180,288
    interpMethod: conserve_order1
    inputRealm: land
  - type: land_cmip
    sources: land_month_cmip
    sourceGrid: cubedsphere
    xyInterp: 180,288
    interpMethod: conserve_order1
    inputRealm: land
  - type: tracer_level
    sources: atmos_tracer
    sourceGrid: cubedsphere
    xyInterp: 180,288
    interpMethod: conserve_order1
    inputRealm: atmos
